{% extends 'base.html' %} 
{% load static %} 
{% block content %}
<main>
    <div class="container-fluid site-width">
        <!-- START: Breadcrumbs-->
        <div class="row">
            <div class="col-12">

                <div class="row">
                    <div class="col-12 col-md-6 col-lg-7  align-self-center  my-4">
                        <div class="sub-header align-self-center d-sm-flex w-100 rounded">
                            <div class="w-sm-100"><h4 class="mb-0">Dashboard</h4> <p>Welcome to the admin panel</p>
                                <a href="#" class="btn btn-primary">Get Started <i class="fas fa-arrow-right"></i></a>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- END: Breadcrumbs-->

        <!-- START: Card Data-->
        <div class="row">
            <div class="col-12 col-sm-6 col-xl-4 mt-3">
                <div class="card">
                    <div class="card-body text-info border-bottom border-info border-w-5">
                        <h2 class="text-center">{{ patients_count }}</h2>
                        <h6 class="text-center">Patients Treated</h6>       
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-xl-4 mt-3">
                <div class="card">
                    <div class="card-body text-success border-bottom border-success border-w-5">
                        <h2 class="text-center">{{ medical_records_count }}</h2>
                        <h6 class="text-center">Medical Records</h6>       
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-xl-4 mt-3">
                <div class="card">
                    <div class="card-body text-danger border-bottom border-danger border-w-5">
                        <h2 class="text-center">{{ diagnoses_count }}</h2>
                        <h6 class="text-center">Diagnoses</h6>       
                    </div>
                </div>
            </div>            

            <div class="col-lg-4 mt-3">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">                               
                        <h6 class="card-title">Patients by Condition</h6>
                    </div>
                    <div class="card-content">
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-borderless pick-table mb-0">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th class="text-right">Active Cases</th>
                                            <th class="text-right">Recovered</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for condition, active_cases, recovered_cases in conditions_data %}
                                        <tr>
                                            <td>{{ condition }}</td>
                                            <td class="text-right">{{ active_cases }}</td>
                                            <td class="text-right">{{ recovered_cases }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Display Appointments -->
            <div class="col-lg-8 mt-3">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Appointments</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Patient</th>
                                        <th>Purpose</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for appointment in appointments %}
                                    <tr>
                                        <td>{{ appointment.appointment_date }}</td>
                                        <td>{{ appointment.patient }}</td>
                                        <td>{{ appointment.purpose }}</td>
                                        <td>{{ appointment.status }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display Schedules -->
            <div class="col-lg-12 mt-3">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Schedules</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            {% for schedule in schedules %}
                            <li>{{ schedule.doctor }} - {{ schedule.start_time }} to {{ schedule.end_time }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>        
        </div>
        <!-- END: Card DATA-->                 
    </div>
</main>
{% endblock %}
