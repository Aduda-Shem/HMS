{% extends 'base.html' %} 
{% load static %} 
{% block content %}
<main>
    <div class="container-fluid site-width">
        <div class="row">
            <!-- Blood pressure chart card -->
            <div class="col-lg-6 mt-3">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Blood Pressure Chart</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="blood_pressure_chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Patient information card -->
            <div class="col-lg-6 mt-3">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Patient Information</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li><strong>Email:</strong> {{ patient.user.email }}</li>
                            <li><strong>Phone Number:</strong> {{ patient.phone_number }}</li>
                            <li><strong>ID Number:</strong> {{ patient.id_number }}</li>
                            <li><strong>Date of Birth:</strong> {{ patient.date_of_birth }}</li>
                            <li><strong>Gender:</strong> {{ patient.gender }}</li>
                            <li><strong>Insurance Provider:</strong> {{ patient.insurance_provider }}</li>
                            <li><strong>Medical Record Number:</strong> {{ patient.medical_record_number }}</li>
                            <li><strong>File Number:</strong> {{ patient.file_number }}</li>
                            <li><strong>Address:</strong> {{ patient.address }}</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Next appointment card -->
            <div class="col-12 mt-3">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Next Appointment</h5>
                    </div>
                    <div class="card-body">
                        {% if latest_appointment %}
                            <ul class="list-unstyled">
                                <li><strong>Appointment Date:</strong> {{ latest_appointment.appointment_date }}</li>
                                <li><strong>Doctor:</strong> {{ latest_appointment.doctor }}</li>
                                <li><strong>Purpose:</strong> {{ latest_appointment.purpose }}</li>
                                <li><strong>Status:</strong> {{ latest_appointment.get_status_display }}</li>
                            </ul>
                        {% else %}
                            <p>No upcoming appointments.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- JavaScript for Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- JavaScript for Calendar -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

<script>
    // Blood pressure chart
    var ctx = document.getElementById('blood_pressure_chart').getContext('2d');
    var bloodPressureChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            datasets: [{
                label: 'Systolic Pressure',
                data: [120, 122, 118, 124],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            },
            {
                label: 'Diastolic Pressure',
                data: [80, 78, 82, 76],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });

    // Initialize FullCalendar
    $(document).ready(function() {
        $('#calendar').fullCalendar({
            // Add your calendar options here
        });
    });
</script>
{% endblock %}
